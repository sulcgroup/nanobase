{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{\"ct+p\":function(t,i,e){\"use strict\";e.r(i),e.d(i,\"HomeModule\",(function(){return k}));var o=e(\"ofXK\"),c=e(\"tk/3\"),n=e(\"tyNb\"),r=e(\"fXoL\"),a=e(\"ey9i\"),s=e(\"bv9b\"),l=e(\"A5z7\"),d=e(\"Wp6s\"),b=e(\"bTqV\"),u=e(\"NFeN\");function g(t,i){if(1&t&&r.Mb(0,\"img\",15),2&t){const t=r.cc().$implicit;r.ic(\"src\",\"file/\"+t.id+\"/\"+t.displayImage,r.rc)}}const p=function(t){return[\"/structure\",t]};function h(t,i){if(1&t&&(r.Rb(0,\"mat-card\",11),r.Rb(1,\"mat-card-header\"),r.Rb(2,\"mat-card-title\"),r.zc(3),r.Qb(),r.Rb(4,\"mat-card-subtitle\"),r.zc(5),r.Qb(),r.Qb(),r.yc(6,g,1,1,\"img\",12),r.Rb(7,\"mat-card-content\"),r.Rb(8,\"p\"),r.zc(9),r.Qb(),r.Qb(),r.Rb(10,\"mat-card-actions\"),r.Rb(11,\"button\",13),r.Rb(12,\"mat-icon\",14),r.zc(13,\"subject\"),r.Qb(),r.zc(14,\" VIEW STRUCTURE \"),r.Qb(),r.Qb(),r.Qb()),2&t){const t=i.$implicit,e=r.cc();r.Ab(3),r.Ac(t.title),r.Ab(2),r.Cc(\"\",t.lastName,\" | \",e.formatDate(t.uploadDate),\"\"),r.Ab(1),r.hc(\"ngIf\",t.displayImage),r.Ab(3),r.Ac(t.description),r.Ab(2),r.hc(\"routerLink\",r.kc(6,p,t.id))}}function m(t,i){if(1&t){const t=r.Sb();r.Rb(0,\"mat-chip\",16),r.Yb(\"click\",(function(){r.qc(t);const e=i.$implicit;return r.cc().routeTag(e,\"applications\")})),r.zc(1),r.Qb()}if(2&t){const t=i.$implicit;r.Ab(1),r.Ac(t)}}function f(t,i){if(1&t){const t=r.Sb();r.Rb(0,\"mat-chip\",17),r.Yb(\"click\",(function(){r.qc(t);const e=i.$implicit;return r.cc().routeTag(e,\"modifications\")})),r.zc(1),r.Qb()}if(2&t){const t=i.$implicit;r.Ab(1),r.Ac(t)}}function y(t,i){if(1&t){const t=r.Sb();r.Rb(0,\"mat-chip\",18),r.Yb(\"click\",(function(){r.qc(t);const e=i.$implicit;return r.cc().routeTag(e,\"keywords\")})),r.zc(1),r.Qb()}if(2&t){const t=i.$implicit;r.Ab(1),r.Ac(t)}}const x=function(t){return{invisible:t}},R=[{path:\"\",component:(()=>{class t{constructor(t,i,e){this.router=t,this.route=i,this.structService=e,this.loadBar=!0,this.loadBarMode=\"query\",this.structures=[],this.oldHeight=0,this.months=[\"Jan.\",\"Feb.\",\"Mar.\",\"Apr.\",\"May\",\"Jun.\",\"Jul.\",\"Aug.\",\"Sep.\",\"Oct.\",\"Nov.\",\"Dec\"],this.categories={title:\"title\",user_name:\"user\",user_id:\"user_id\",applications:\"application\",modifications:\"modification\",keywords:\"keyword\",authors:\"author\"}}ngOnInit(){let t=this.route.snapshot.queryParams.input,i=this.route.snapshot.queryParams.category;t?this.loadSearch(t,i):this.loadRecent(15),this.loadRecentTags(10),this.infiniteScroll(),this.router.events.subscribe(e=>{if(e instanceof n.b){const o=new URLSearchParams(e.url.slice(2));t=o.get(\"input\"),i=o.get(\"category\"),t?this.loadSearch(t,i):this.loadRecent(15)}})}infiniteScroll(){document.addEventListener(\"scroll\",t=>{const i=document.body,e=document.documentElement,o=window.scrollY+window.innerHeight,c=Math.max(i.scrollHeight,i.offsetHeight,e.clientHeight,e.scrollHeight);o+300>=c&&this.oldHeight+300<c&&(this.oldHeight=o,this.loadRandom(5))})}loadSearch(t,i){this.oldHeight=1/0,this.message=\"\",this.structService.search(t,i).subscribe(e=>{0===Object.keys(e).length?(this.message=`No structures match the query \"${t}\".`,this.structures=[]):(e.forEach((t,i)=>e[i].uploadDate=new Date(t.uploadDate)),this.structures=e,this.message=\"user_id\"===this.categories[i]?\"Showing your structures...\":`Showing structures with ${this.categories[i]} \"${t}\"...`,console.log(\"Loaded searched structures: \",this.structures)),this.loadBar=!1},t=>{console.log(\"err\",t),this.loadBar=!1})}loadRandom(t){this.structService.getRandom(t).subscribe(i=>{i.forEach((t,e)=>i[e].uploadDate=new Date(t.uploadDate)),this.structures.push(...i),console.log(`Loaded ${t} more structures: `,i),this.loadBar=!1},t=>{console.log(\"err\",t),this.loadBar=!1})}loadRecent(t){this.oldHeight=0,this.message=\"\",this.structService.getRecent(t).subscribe(t=>{t.forEach((i,e)=>t[e].uploadDate=new Date(i.uploadDate)),this.structures=t,console.log(\"Loaded recent structures: \",this.structures),this.loadBar=!1},t=>{console.log(\"err\",t),this.loadBar=!1})}loadRecentTags(t){this.structService.getRecentTags(t).subscribe(t=>this.tags=t,t=>console.log(\"err\",t))}routeTag(t,i){this.router.navigateByUrl(`/?input=${t}&category=${i}`)}formatDate(t){return this.months[t.getMonth()]+` ${t.getDate()}, ${t.getFullYear()}`}}return t.\\u0275fac=function(i){return new(i||t)(r.Lb(n.c),r.Lb(n.a),r.Lb(a.StructureService))},t.\\u0275cmp=r.Fb({type:t,selectors:[[\"app-home\"]],decls:22,vars:9,consts:[[\"id\",\"progress-bar\",3,\"ngClass\",\"mode\"],[\"id\",\"content-container\"],[\"id\",\"list-container\"],[\"id\",\"message\"],[\"class\",\"structure-container\",4,\"ngFor\",\"ngForOf\"],[\"id\",\"extras-container\"],[1,\"box\"],[1,\"box-title\"],[\"class\",\"application chip\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[\"class\",\"modification chip\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[\"class\",\"keyword chip\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[1,\"structure-container\"],[\"class\",\"display-image\",\"mat-card-image\",\"\",\"alt\",\"Display Image\",3,\"src\",4,\"ngIf\"],[\"mat-button\",\"\",\"color\",\"primary\",1,\"structure-button\",3,\"routerLink\"],[\"color\",\"primary\"],[\"mat-card-image\",\"\",\"alt\",\"Display Image\",1,\"display-image\",3,\"src\"],[1,\"application\",\"chip\",3,\"click\"],[1,\"modification\",\"chip\",3,\"click\"],[1,\"keyword\",\"chip\",3,\"click\"]],template:function(t,i){1&t&&(r.Mb(0,\"mat-progress-bar\",0),r.Rb(1,\"div\",1),r.Rb(2,\"div\",2),r.Rb(3,\"div\",3),r.zc(4),r.Qb(),r.yc(5,h,15,8,\"mat-card\",4),r.Qb(),r.Rb(6,\"div\",5),r.Rb(7,\"div\",6),r.Rb(8,\"div\",7),r.zc(9,\"Recent applications\"),r.Qb(),r.Rb(10,\"mat-chip-list\"),r.yc(11,m,2,1,\"mat-chip\",8),r.Qb(),r.Qb(),r.Rb(12,\"div\",6),r.Rb(13,\"div\",7),r.zc(14,\"Recent modifications\"),r.Qb(),r.Rb(15,\"mat-chip-list\"),r.yc(16,f,2,1,\"mat-chip\",9),r.Qb(),r.Qb(),r.Rb(17,\"div\",6),r.Rb(18,\"div\",7),r.zc(19,\"Recent keywords\"),r.Qb(),r.Rb(20,\"mat-chip-list\"),r.yc(21,y,2,1,\"mat-chip\",10),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.ic(\"mode\",i.loadBarMode),r.hc(\"ngClass\",r.kc(7,x,!i.loadBar)),r.Ab(4),r.Ac(i.message),r.Ab(1),r.hc(\"ngForOf\",i.structures),r.Ab(6),r.hc(\"ngForOf\",null==i.tags?null:i.tags.applications),r.Ab(5),r.hc(\"ngForOf\",null==i.tags?null:i.tags.modifications),r.Ab(5),r.hc(\"ngForOf\",null==i.tags?null:i.tags.keywords))},directives:[s.a,o.i,o.j,l.c,d.a,d.d,d.h,d.g,o.k,d.c,d.b,b.b,n.d,u.a,d.e,l.a],styles:['#content-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}#content-container[_ngcontent-%COMP%], #list-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:auto}#extras-container[_ngcontent-%COMP%]{flex-basis:50%;margin:55px auto;width:100%;height:100%}.structure-container[_ngcontent-%COMP%]{background-color:#e0e0e6;box-shadow:0 0 7px 2px #bebebe;z-index:0;margin:20px auto 30px;width:75%;max-width:625px}.structure-button[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}#message[_ngcontent-%COMP%]{font-weight:500;font-size:18px;margin-left:15px;margin-top:15px}[_nghost-%COMP%]     .mat-card-content{margin-bottom:0!important}.display-image[_ngcontent-%COMP%]{border:1px solid #b2b7c4;border-left:0;border-right:0}.box[_ngcontent-%COMP%]{width:65%;margin-left:20px;margin-bottom:40px;padding-left:11px;padding-top:10px;padding-bottom:12px;border-radius:10px;background-color:#e0e0e6;box-shadow:0 0 7px 2px #bebebe}.box-title[_ngcontent-%COMP%]{font:15px sans-serif;opacity:.85;margin-bottom:8px}.box-title[_ngcontent-%COMP%]:after{position:relative;right:6px;content:\"\";display:block;margin:0 auto 5px;width:98%;padding-top:5px;border-bottom:1px solid #5b5b5c}.invisible[_ngcontent-%COMP%]{visibility:hidden!important}#progress-bar[_ngcontent-%COMP%]{position:fixed!important;z-index:100!important;bottom:92.1%!important;right:1px!important}.chip[_ngcontent-%COMP%]{font-weight:400;cursor:pointer}.application[_ngcontent-%COMP%]{background-color:rgba(136,1,160,.8);color:hsla(0,0%,100%,.9)}.modification[_ngcontent-%COMP%]{background-color:rgba(93,241,158,.8);color:rgba(0,0,0,.9)}.keyword[_ngcontent-%COMP%]{background-color:rgba(255,208,50,.8);color:rgba(0,0,0,.9)}']}),t})()}];let w=(()=>{class t{}return t.\\u0275mod=r.Jb({type:t}),t.\\u0275inj=r.Ib({factory:function(i){return new(i||t)},imports:[[n.f.forChild(R)],n.f]}),t})(),k=(()=>{class t{}return t.\\u0275mod=r.Jb({type:t}),t.\\u0275inj=r.Ib({factory:function(i){return new(i||t)},imports:[[o.c,w,d.f,b.c,u.b,l.e,s.b,c.b]]}),t})()}}]);","extractedComments":[]}