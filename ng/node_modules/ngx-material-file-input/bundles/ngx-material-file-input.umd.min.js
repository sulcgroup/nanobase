!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/cdk/a11y"),require("@angular/forms"),require("@angular/material/core"),require("@angular/material/form-field"),require("@angular/cdk/coercion")):"function"==typeof define&&define.amd?define("ngx-material-file-input",["exports","@angular/core","@angular/cdk/a11y","@angular/forms","@angular/material/core","@angular/material/form-field","@angular/cdk/coercion"],t):t((e=e||self)["ngx-material-file-input"]={},e.ng.core,e.ng.cdk.a11y,e.ng.forms,e.ng.material.core,e.ng.material["form-field"],e.ng.cdk.coercion)}(this,(function(e,t,n,o,r,i,l){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function u(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(i<3?r(l):i>3?r(t,n,l):r(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}function p(e,t){return function(n,o){t(n,o,e)}}var s=new t.InjectionToken("ngx-mat-file-input.config"),c=function(){},f=function(){function e(e,t){void 0===t&&(t=", "),this._files=e,this.delimiter=t,this._fileNames=(this._files||[]).map((function(e){return e.name})).join(t)}return Object.defineProperty(e.prototype,"files",{get:function(){return this._files||[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileNames",{get:function(){return this._fileNames},enumerable:!0,configurable:!0}),e}(),d=function(e,t,n,o){this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=o},h=r.mixinErrorState(d),y=function(e){function s(t,n,o,r,i,l,a){var u=e.call(this,r,l,a,i)||this;return u.fm=t,u._elementRef=n,u._renderer=o,u._defaultErrorStateMatcher=r,u.ngControl=i,u._parentForm=l,u._parentFormGroup=a,u.focused=!1,u.controlType="file-input",u.autofilled=!1,u._required=!1,u.accept=null,u.id="ngx-mat-file-input-"+c.nextId++,u.describedBy="",u._onChange=function(e){},u._onTouched=function(){},null!=u.ngControl&&(u.ngControl.valueAccessor=u),t.monitor(n.nativeElement,!0).subscribe((function(e){u.focused=!!e,u.stateChanges.next()})),u}var c;return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(s,e),c=s,s.prototype.setDescribedByIds=function(e){this.describedBy=e.join(" ")},Object.defineProperty(s.prototype,"value",{get:function(){return this.empty?null:new f(this._elementRef.nativeElement.value||[])},set:function(e){e&&(this.writeValue(e),this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"empty",{get:function(){return!this._elementRef.nativeElement.value||0===this._elementRef.nativeElement.value.length},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty||void 0!==this.valuePlaceholder},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"required",{get:function(){return this._required},set:function(e){this._required=l.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isDisabled",{get:function(){return this.disabled},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"disabled",{get:function(){return this._elementRef.nativeElement.disabled},set:function(e){this.setDisabledState(l.coerceBooleanProperty(e)),this.stateChanges.next()},enumerable:!0,configurable:!0}),s.prototype.onContainerClick=function(e){"input"===e.target.tagName.toLowerCase()||this.disabled||(this._elementRef.nativeElement.querySelector("input").focus(),this.focused=!0,this.open())},Object.defineProperty(s.prototype,"fileNames",{get:function(){return this.value?this.value.fileNames:this.valuePlaceholder},enumerable:!0,configurable:!0}),s.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",e instanceof f?e.files:null)},s.prototype.registerOnChange=function(e){this._onChange=e},s.prototype.registerOnTouched=function(e){this._onTouched=e},s.prototype.clear=function(e){e&&(e.preventDefault(),e.stopPropagation()),this.value=new f([]),this._elementRef.nativeElement.querySelector("input").value=null,this._onChange(this.value)},s.prototype.change=function(e){var t=e.target.files,n=[];if(t)for(var o=0;o<t.length;o++)n.push(t[o]);this.value=new f(n),this._onChange(this.value)},s.prototype.blur=function(){this.focused=!1,this._onTouched()},s.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},s.prototype.ngOnInit=function(){this.multiple=l.coerceBooleanProperty(this.multiple)},s.prototype.open=function(){this.disabled||this._elementRef.nativeElement.querySelector("input").click()},s.prototype.ngOnDestroy=function(){this.stateChanges.complete(),this.fm.stopMonitoring(this._elementRef.nativeElement)},s.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState()},s.nextId=0,s.ctorParameters=function(){return[{type:n.FocusMonitor},{type:t.ElementRef},{type:t.Renderer2},{type:r.ErrorStateMatcher},{type:o.NgControl,decorators:[{type:t.Optional},{type:t.Self}]},{type:o.NgForm,decorators:[{type:t.Optional}]},{type:o.FormGroupDirective,decorators:[{type:t.Optional}]}]},u([t.Input()],s.prototype,"autofilled",void 0),u([t.Input()],s.prototype,"valuePlaceholder",void 0),u([t.Input()],s.prototype,"multiple",void 0),u([t.Input()],s.prototype,"accept",void 0),u([t.Input()],s.prototype,"errorStateMatcher",void 0),u([t.HostBinding()],s.prototype,"id",void 0),u([t.HostBinding("attr.aria-describedby")],s.prototype,"describedBy",void 0),u([t.Input()],s.prototype,"value",null),u([t.Input()],s.prototype,"placeholder",null),u([t.HostBinding("class.mat-form-field-should-float")],s.prototype,"shouldLabelFloat",null),u([t.Input()],s.prototype,"required",null),u([t.HostBinding("class.file-input-disabled")],s.prototype,"isDisabled",null),u([t.Input()],s.prototype,"disabled",null),u([t.HostListener("change",["$event"])],s.prototype,"change",null),u([t.HostListener("focusout")],s.prototype,"blur",null),s=c=u([t.Component({selector:"ngx-mat-file-input",template:'<input #input type="file" [attr.multiple]="multiple? \'\' : null" [attr.accept]="accept">\n<span class="filename" [title]="fileNames">{{ fileNames }}</span>\n',providers:[{provide:i.MatFormFieldControl,useExisting:c}],styles:[":host{display:inline-block;width:100%}:host:not(.file-input-disabled){cursor:pointer}input{width:0;height:0;opacity:0;overflow:hidden;position:absolute;z-index:-1}.filename{display:inline-block;text-overflow:ellipsis;overflow:hidden;width:100%}"]}),p(4,t.Optional()),p(4,t.Self()),p(5,t.Optional()),p(6,t.Optional())],s)}(h),m=function(){function e(e){this.config=e,this.unit=e?e.sizeUnit:"Byte"}return e.prototype.transform=function(e,t){return parseInt(e,10)>=0&&(e=this.formatBytes(+e,+t)),e},e.prototype.formatBytes=function(e,t){if(0===e)return"0 "+this.unit;var n=this.unit.charAt(0),o=t||2,r=[this.unit,"K"+n,"M"+n,"G"+n,"T"+n,"P"+n,"E"+n,"Z"+n,"Y"+n],i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(o))+" "+r[i]},e.ctorParameters=function(){return[{type:c,decorators:[{type:t.Optional},{type:t.Inject,args:[s]}]}]},e=u([t.Pipe({name:"byteFormat"}),p(0,t.Optional()),p(0,t.Inject(s))],e)}(),g=function(){function e(){}return e=u([t.NgModule({declarations:[y,m],providers:[n.FocusMonitor],exports:[y,m]})],e)}();(e.FileValidator||(e.FileValidator={})).maxContentSize=function(e){return function(t){var n=t&&t.value?t.value.files.map((function(e){return e.size})).reduce((function(e,t){return e+t}),0):0;return e>=n?null:{maxContentSize:{actualSize:n,maxSize:e}}}},e.ByteFormatPipe=m,e.FileInput=f,e.FileInputComponent=y,e.FileInputConfig=c,e.MaterialFileInputModule=g,e.NGX_MAT_FILE_INPUT_CONFIG=s,e.ɵa=d,e.ɵb=h,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-material-file-input.umd.min.js.map